{"version":3,"sources":["ext-a.js"],"names":["mount","host","extMsgChan","MessageChannel","el","querySelector","wrap","document","createElement","statusEl","append","port1","onmessage","e","data","innerHTML","indexedDB","item","Date","toLocaleTimeString","JSON","stringify","prepend","setTimeout","postMessage","port2","window"],"mappings":";AAAA,eAAeA,GAAO,KAAEC,IAEhBC,MAAAA,EAAa,IAAIC,eACjBC,EAAKH,EAAKI,cAAc,SACxBC,EAAOC,SAASC,cAAc,WAC9BC,EAAWL,EAAGC,cAAc,MAElCD,EAAGM,OAAOJ,GAEVJ,EAAWS,MAAMC,UAAaC,CAAAA,IACxBC,IAAAA,EAAOD,EAAEC,KAETA,GAAS,iBAATA,EAKF,YAJAL,EAASM,4HAEkDC,2BAKvDC,MAAAA,EAAOV,SAASC,cAAc,KACpCS,EAAKF,eAAiB,IAAIG,MAAQC,gCAAgCC,KAAKC,UAAUP,cACjFR,EAAKgB,QAAQL,KAIfM,WAAW,KACTC,YAAY,oBACV,IACA,CAACtB,EAAWuB,UAIlBC,OAAO,SAAW,CAChB1B,MAAAA","file":"ext-a.d37d292f.js","sourceRoot":"..","sourcesContent":["async function mount ({ host }) {\n  // TODO: message channel handled by SDK\n  const extMsgChan = new MessageChannel()\n  const el = host.querySelector('#appx')\n  const wrap = document.createElement('section')\n  const statusEl = el.querySelector('h4')\n\n  el.append(wrap)\n\n  extMsgChan.port1.onmessage = (e) => {\n    let data = e.data\n\n    if (data === ':established') {\n      statusEl.innerHTML =\n        `<span style=\"color: green; \">Connected!</span>\n         <p><code>typeof window.indexedDB</code>---&gt; ${typeof indexedDB}</p>\n        `\n      return\n    }\n\n    const item = document.createElement('p')\n    item.innerHTML = `[${(new Date()).toLocaleTimeString()}]<strong>${JSON.stringify(data)}</strong>`\n    wrap.prepend(item)\n  }\n\n  // establish message channel\n  setTimeout(() => {\n    postMessage(':establish :ext-a',\n      '*',\n      [extMsgChan.port2])\n  })\n}\n\nwindow['ext-a'] = {\n  mount\n}\n\n"]}